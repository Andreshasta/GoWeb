--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 6.1.787
--   Created On : viernes, 11 noviembre, 2016 
--   DBMS       : PostgreSQL 
--   -------------------------------------------------- 


--  Drop Foreign Key Constraints 
ALTER TABLE puntaje DROP CONSTRAINT FK_puntaje_juego
;
ALTER TABLE puntaje DROP CONSTRAINT FK_puntaje_jugador
;

--  Drop Tables 
DROP TABLE juego
;
DROP TABLE jugador
;
DROP TABLE puntaje
;

--  Create Tables 
CREATE TABLE juego ( 
	id_juego integer NOT NULL,
	n_nombre varchar(50) NOT NULL
)
;
COMMENT ON TABLE juego
    IS 'Almacena informaciòn del juego'
;

CREATE TABLE jugador ( 
	id_jugador integer NOT NULL,
	n_nombreJugador varchar(50) NOT NULL
)
;
COMMENT ON TABLE jugador
    IS 'almacena inf del jugador'
;

CREATE TABLE puntaje ( 
	id_puntaje integer NOT NULL,
	id_juego integer NOT NULL,
	id_jugador integer NOT NULL,
	v_puntaje numeric(10,2) NOT NULL
)
;
COMMENT ON TABLE puntaje
    IS 'almacena informacion de los puntajes'
;


--  Create Primary Key Constraints 
ALTER TABLE juego ADD CONSTRAINT PK_juego 
	PRIMARY KEY (id_juego)
;


ALTER TABLE jugador ADD CONSTRAINT PK_jugador 
	PRIMARY KEY (id_jugador)
;


ALTER TABLE puntaje ADD CONSTRAINT PK_puntaje 
	PRIMARY KEY (id_puntaje)
;



--  Create Indexes 
ALTER TABLE jugador
	ADD CONSTRAINT UQ_jugador_n_nombreJugador UNIQUE (n_nombreJugador)
;


--  Create Foreign Key Constraints 
ALTER TABLE puntaje ADD CONSTRAINT FK_puntaje_juego 
	FOREIGN KEY (id_juego) REFERENCES juego (id_juego)
;

ALTER TABLE puntaje ADD CONSTRAINT FK_puntaje_jugador 
	FOREIGN KEY (id_jugador) REFERENCES jugador (id_jugador)
;
